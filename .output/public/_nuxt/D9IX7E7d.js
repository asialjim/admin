import{E as V,a as y,b as I}from"./BAw1MrN-.js";import{E as k}from"./BmJm0hZK.js";import{d as E,r as u,K as m,x as h,z as t,B as l,C as a,g as C,J as B,y as F,D as c,L as R,M as f}from"./yHbOXYhg.js";import{_ as q}from"./DlAUqK2U.js";const M={class:"login-container"},N={class:"login-form-wrapper"},U={class:"form-footer"},z=E({__name:"login",setup(D){const g=B(),p=u(),d=u(!1),o=m({appId:"",username:"",password:""}),_=m({appId:[{required:!0,message:"请输入应用编号",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]}),b=async()=>{if(p.value)try{await p.value.validate(),d.value=!0;const n={username:o.username,password:o.password,code:"",state:""},e={"x-app-id":o.appId,"x-app-chl":"PC","x-app-chl-app-type":"CMS"},s=await R.login("/api/open/auth/login",n,e);s&&s.status===200&&s.code==="0"?(f.success("登录成功"),g.push("/dashboard")):f.error((s==null?void 0:s.msg)||"登录失败，请重试")}catch(n){console.error("登录失败:",n)}finally{d.value=!1}};return(n,e)=>{const s=I,i=y,w=k,v=V,x=C("router-link");return F(),h("div",M,[t("div",N,[e[5]||(e[5]=t("div",{class:"form-header"},[t("h2",{class:"form-title"},"用户登录"),t("p",{class:"form-subtitle"},"请输入您的账号信息")],-1)),l(v,{ref_key:"loginFormRef",ref:p,model:o,rules:_,"label-width":"80px",class:"login-form"},{default:a(()=>[l(i,{label:"应用编号",prop:"appId"},{default:a(()=>[l(s,{modelValue:o.appId,"onUpdate:modelValue":e[0]||(e[0]=r=>o.appId=r),placeholder:"请输入应用编号","prefix-icon":"el-icon-office-building"},null,8,["modelValue"])]),_:1}),l(i,{label:"用户名",prop:"username"},{default:a(()=>[l(s,{modelValue:o.username,"onUpdate:modelValue":e[1]||(e[1]=r=>o.username=r),placeholder:"请输入用户名","prefix-icon":"el-icon-user"},null,8,["modelValue"])]),_:1}),l(i,{label:"密码",prop:"password"},{default:a(()=>[l(s,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=r=>o.password=r),type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":""},null,8,["modelValue"])]),_:1}),l(i,null,{default:a(()=>[l(w,{type:"primary",size:"large",class:"login-btn",onClick:b,loading:d.value},{default:a(()=>[...e[3]||(e[3]=[c(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),t("div",U,[l(x,{to:"/register",class:"register-link"},{default:a(()=>[...e[4]||(e[4]=[c("没有账号？立即注册",-1)])]),_:1})])])])}}}),P=q(z,[["__scopeId","data-v-88f4e7b3"]]);export{P as default};
